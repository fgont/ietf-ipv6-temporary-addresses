<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>
<?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?> <!-- used by XSLT processors -->
<!-- OPTIONS, known as processing instructions (PIs) go here. -->
<?rfc toc="yes" ?>
<?rfc tocompact="yes"?>
<!-- If "yes" eliminates blank lines before main section entries. -->
<?rfc tocdepth="1"?>
<?rfc symrefs="yes" ?>
<?rfc sortrefs="yes" ?>
<?rfc strict="no" ?>
<rfc category="std" docName="draft-gont-6man-non-stable-iids-01" 
ipr="trust200902" updates="RFC4941">

<front>
<title abbrev="Temporary Interface-IDs">
Recommendation on Temporary IPv6 Interface Identifiers</title>

    <author fullname="Fernando Gont" initials="F." surname="Gont">
      <organization abbrev="SI6 Networks / UTN-FRH">SI6 Networks / UTN-FRH</organization>

      <address>
        <postal>
          <street>Evaristo Carriego 2644</street>

          <code>1706</code>

          <city>Haedo</city>

          <region>Provincia de Buenos Aires</region>

          <country>Argentina</country>
        </postal>

        <phone>+54 11 4650 8472</phone>

        <email>fgont@si6networks.com</email>

        <uri>http://www.si6networks.com</uri>
      </address>
    </author>


    <author initials="W." surname="Liu" fullname="Will Liu">
      <organization>Huawei Technologies</organization>
      <address>
        <postal>
          <street>Bantian, Longgang District</street>
          <city>Shenzhen</city>
          <code>518129</code>
          <country>P.R. China</country>
        </postal>
        <email>liushucheng@huawei.com</email>
      </address>
    </author>

 <author fullname="Christian Huitema" initials="C." surname="Huitema">
    <organization>Private Octopus Inc.</organization>
    <address>
      <postal>
        <street></street>
        <city>Friday Harbor</city>
        <code>98250</code>
        <region>WA</region>
        <country>U.S.A.</country>
      </postal>
      <email>huitema@huitema.net</email>
      <uri>http://privateoctopus.com/</uri>
    </address>
  </author>


<date/>
<area>Internet</area>
<workgroup>IPv6 maintenance Working Group (6man)</workgroup>
    <abstract>
    <t>
This document clarifies the stability requirements for IP6 addresses, and provides recommendations regarding the generation of Temporary addresses. Finally, it formally updates RFC4941 such that nodes are allowed to configure only temporary addresses.
    </t>
    </abstract>
  </front>

  <middle>
  
  
<section title="Introduction" anchor="intro">
<t>IPv6 StateLess Address AutoConfiguration (SLAAC) <xref target="RFC4862"/> 
has traditionally resulted in stable addresses, since the Interface Identifier (IID) 
has been generated by embedding a stable layer-2 numeric identifier (e.g., a MAC 
address). <xref target="RFC4941"/> implies, throughout the  specification, that 
temporary addresses are generated and employed along with temporary addresses.
</t>

<!--
[RFC4941]:
   Addresses generated using stateless address autoconfiguration
   [ADDRCONF] contain an embedded interface identifier, which remains
   constant over time.


[....]

   1.  Do not result in any changes to the basic behavior of addresses
       generated via stateless address autoconfiguration [ADDRCONF].
-->

<t>While the use of stable addresses (only) or mixed stable and temporary 
addresses can be desirable in a number of scenarios, there are other scenarios 
in which, for security and privacy reasons, a node may want to use only Temporary 
address (e.g., a temporary address).</t>

<t>This document clarifies the requirements for stability of IPv6 addresses, such 
that nodes are not required to configure stable addresses. It also specifies a set 
of requirements for the generation of Temporary addresses. Finally, it formally 
updates <xref target="RFC4941"/> such that temporary addresses can be employed 
without the need to configure a stable address along side.
</t>
</section>


<section title="Terminology" anchor="terminology">

<t>This document employs the terms defined in <xref target="RFC7721"/>.</t>


<t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
   NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   RFC 2119 <xref target="RFC2119"/>.</t>
</section>

<section title="Problem statement" >
<t>
When <xref target="RFC4941"/> was written, its authors wanted to prevent privacy and security
attacks enabled by the inclusions in addresses of "an embedded interface identifier, which remains
constant over time." They observed that "Anytime a fixed identifier is used in multiple
contexts, it becomes possible to correlate seemingly unrelated activity using this identifier." 
They were concerned with both on-path attackers who would observe the IP addresses of
packets observed in transit, and attackers that would have access to the logs of servers.
</t>
<t>
Since the publication of <xref target="RFC4941"/> in September 2007, our understanding of threats
and mitigations has evolved. We are now concerned with Pervasive Monitoring 
<xref target="RFC7258" />, as well as the wide spread collection of information for
advertising and other purposes, for example through the Real Time Bidding protocol used for 
advertising auctions <xref target="RTB25" />.
</t>
<t>
The widespread deployment of encryption advocated in <xref target="RFC7624" /> is a 
response to Pervasive Monitoring. Encryption of communication reduces the amount of
information that can be collected by monitoring data links, but does not prevent
monitoring of IPv6 addresses embedded in clear text packet headers. Stable IPv6 addresses
enable the correlation of such data over time. 
</t>
<t>
MAC Address Randomization <xref target="IETFMACRandom" />
is another response to pervasive monitoring. In conjunction with
DHCP Anonymity <xref target="RFC7844" />, it ensures that devices cannot be tracked by their
MAC Address or their DHCP identifiers when they connect to "hot spots". However, the privacy
effects of MAC Address Randomization would be nullified if a device kept using the
same IPv6 address before and after a randomization event.
</t>
<t>
Many Web Browsers have options enabling browsing "in private". However,
if the web connections during the private mode use the same IPv6 address as those
in the public mode, web tracking systems similar to <xref target="RTB25" /> will quickly
find the correlation between the public personna of the user and the supposedly
private connection. Similarly, many web browsers have options to "delete history",
including deleting "cookies" and other persistent data. Again, if the same IPv6 address
is used before and after the deletion of cookies, web tracking systems will 
easily correlate the new activity with the prior data collection.
</t>
<t>
Using temporary address alone may not be sufficient to prevent all forms of tracking. It
is however quite clear that some usage of temporary addresses is necessary to
provide user privacy. It is also clear that the usage of temporary addresses needs
to be synchronized with other privacy defining event such as moving to a new network,
performing MAC Address Randomization, or changing the privacy posture of a node.
</t>
</section>

<section title="Stability Requirements for IPv6 Addresses" anchor="iid-generation">
<t>Nodes are not required to generate addresses with any specific stability properties. 
That is, the generation of stable addresses is OPTIONAL. This means that a node may end 
up configuring only stable addresses, only Temporary, or both stable and non-stable addresses.
</t>
</section>


<section title="Requirements for Temporary IPv6 Addresses" anchor="non-iid-generation">
<t>The requirements for temporary IPv6 addresses are as follows:
<list style="numbers">
<t>The resulting Interface Identifiers MUST be different when addresses are configured 
   for different prefixes.  That is, if different
   autoconfiguration prefixes are used to configure addresses for the same
   network interface card, the resulting Interface Identifiers must be
   (statistically) different.  This means that, given two addresses, it must
   be difficult for an outside entity to tell whether the addresses have been
   generated by the same host.
</t>

<t>The resulting interface identifiers MUST NOT embed layer-2 identifiers (e.g. MAC 
addresses).</t>



<t>It must be difficult for an outside entity to predict the Interface
   Identifiers that will be generated by the algorithm, even with knowledge
   of the Interface Identifiers generated for configuring other addresses.
</t>

<t>The resulting Interface Identifiers must be semantically opaque and must not 
follow any specific patterns.</t>

</list>
</t>

<t>The IIDs of addresses configured for different autoconfiguration prefixes must 
be different, such that traffic for those addresses cannot be correlated.</t>

<t>The reuse of identifiers that have their own semantics or properties across 
different contexts or scopes can be detrimental for security and privacy 
<xref target="I-D.gont-predictable-numeric-ids"/> <xref target="RFC6973"/> 
<xref target="RFC4941"/>. For example, if two different layer-3 protocols generate 
their addresses by embedding a layer-2 identifier (e.g., a MAC address), then the 
traffic for such protocols could be correlated (irrespective of whether the 
aforementioned layer-2 identifier has been randomized or not). Besides, a node 
that generates an IPv6 address by embedding a link-layer address in the IPv6 address 
will, when configuring addresses for different prefixes, result in the same IID being 
used for such prefixes, thus allowing the corresponding traffic to be correlated.</t>

<t>For security and privacy reasons, the IIDs generated for temporary addresses must 
not be predictable. Otherwise, the node may be subject to many (if not all) of the 
security and privacy issues that are meant to be mitigated (please see 
<xref target="RFC7721"/>.</t>

<t>Any semantics or patterns in an IID might be leveraged by an attacker to e.g. 
reduce the search space when performing address-scanning attacks, infer the 
identity of the node, etc.</t>
</section>


<section title="Generation of Temporary IPv6 Addresses" anchor="generation">
<t>One possible algorithm for generating temporary IPv6 addresses is that specified 
in <xref target="RFC4941"/>.</t>

<t>Another possible approach would be to select a random IID when performing SLAAC. 
In this case, a node that disconnects from the network and subsequently reconnects 
would employ a (statistically different) IID for the same prefix. A different 
(random) IID should be employed for each autoconfiguration prefix. These addresses, 
as opposed to the temporary addresses specified in RFC4941, would be stable for as 
long as the node stays attached (without disconnecting) to the network, but would 
change when a node reconnects.</t>
</section>

<section title="Update to existing RFCs" anchor="updated-rfcs">
<t>The following subsections clarify how each of the RFCs affected by this document 
are updated.</t>

<section title="Update to RFC4941">
<t>The temporary addresses specified in <xref target="RFC4941"/> MAY be used in 
replacement of the stable addresses <xref target="I-D.ietf-6man-default-iids"/>. 
That is, a node MAY configure temporary addresses only, without configuring any 
stable addresses.
</t>

</section>
</section>

	<section title="Future Work" anchor="future-work">
<t>This document clarifies the requirements for stability requirements for IPv6 
addresses. A subsequent document will discuss the tradeoffs involved when considering 
different stability properties of IPv6 addresses, and and the different configuration 
setups such as: stable addresses only, temporary addresses only, or mixed stable and 
temporary addresses.
</t>
</section>


	<section title="IANA Considerations" anchor="iana-considerations">
<t>There are no IANA registries within this document. The RFC-Editor can remove this 
section before publication of this document as an RFC.</t>
</section>



    <section title="Security Considerations" anchor="sec-cons">
<t>This document clarifies the stability requirements for IPv6 addresses, and specifies 
requirements for the generation of temporary addresses. Additionally, it formally updates 
<xref target="RFC4941"/> such that stable addresses are not required to be configured 
along with the temporary addresses.
</t>
    </section>


    <section title="Acknowledgements">
<t>The authors would like to thank (in alphabetical order) Brian Carpenter and 
Lorenzo Colitti for providing valuable feedback on earlier versions of this document.</t>
    </section>
  </middle>




  <back>
  <references title='Normative References'>
	<?rfc include="reference.RFC.2119" ?>
<!-- CH: commenting out two orphan references
	<?rfc include="reference.RFC.2460" ?>
	<?rfc include="reference.RFC.4291" ?>
-->
	<?rfc include="reference.RFC.4862" ?>
	<?rfc include="reference.RFC.4941" ?>
	<?rfc include="reference.I-D.ietf-6man-default-iids" ?>
  </references>

  <references title='Informative References'>

	<?rfc include="reference.I-D.gont-predictable-numeric-ids" ?>
	<?rfc include="reference.RFC.6973" ?>
        <?rfc include="reference.RFC.7258" ?>
        <?rfc include="reference.RFC.7624" ?>
	<?rfc include="reference.RFC.7721" ?>
        <?rfc include="reference.RFC.7844" ?>

<reference anchor="RTB25" target="http://www.iab.com/wp-content/uploads/2016/03/OpenRTB-API-Specification-Version-2-5-FINAL.pdf">
  <front>
    <title>Real Time Bidding (RTB) project, OpenRTB API Specification Version 2.5</title>
    <author>
      <organization>Interactive Advertising Bureau (IAB)</organization>
    </author>
    <date year="2016" month="December"/>
  </front>
</reference>

<reference anchor="IETFMACRandom" target="http://www.ietf.org/blog/2014/11/mac-privacy/" >
<front>
<title>MAC Privacy</title>
<author initials="JC." surname="Zuniga" fullname="Juan Carlos Zuniga">
      <organization/>
</author>
<date year="2014" month="November"/>
</front>
</reference>

</references>
  </back>
</rfc>
